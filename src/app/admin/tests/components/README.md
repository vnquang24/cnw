# Manage Questions Component - CRUD Ä‘áº§y Ä‘á»§

Component nÃ y cho phÃ©p quáº£n lÃ½ cÃ¢u há»i cho bÃ i kiá»ƒm tra vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng CRUD (Create, Read, Update, Delete).

## TÃ­nh nÄƒng CRUD

### 1. CREATE - Táº¡o cÃ¢u há»i má»›i
- â• **ThÃªm cÃ¢u há»i**: Click nÃºt "ThÃªm cÃ¢u há»i má»›i" á»Ÿ cuá»‘i danh sÃ¡ch
- âœï¸ **Nháº­p ná»™i dung**: GÃµ trá»±c tiáº¿p vÃ o cÃ¡c Ã´ input
- ğŸ’¾ **LÆ°u**: Click nÃºt "LÆ°u" Ä‘á»ƒ táº¡o cÃ¢u há»i má»›i vÃ o database

### 2. READ - Xem danh sÃ¡ch cÃ¢u há»i
- ğŸ“‹ **Hiá»ƒn thá»‹ táº¥t cáº£**: Tá»± Ä‘á»™ng load táº¥t cáº£ cÃ¢u há»i cá»§a bÃ i test
- ğŸ‘ï¸ **Xem chi tiáº¿t**: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ ná»™i dung cÃ¢u há»i vÃ  Ä‘Ã¡p Ã¡n
- ğŸ”„ **Refresh**: Tá»± Ä‘á»™ng cáº­p nháº­t sau má»—i thao tÃ¡c

### 3. UPDATE - Cáº­p nháº­t cÃ¢u há»i
- âœï¸ **VÃ o cháº¿ Ä‘á»™ sá»­a**: Click nÃºt "Sá»­a" trÃªn má»—i cÃ¢u há»i
- ğŸ“ **Chá»‰nh sá»­a**: Thay Ä‘á»•i ná»™i dung, loáº¡i cÃ¢u há»i, Ä‘Ã¡p Ã¡n
- ğŸ’¾ **LÆ°u thay Ä‘á»•i**: Click "LÆ°u" Ä‘á»ƒ cáº­p nháº­t vÃ o database
- âŒ **Há»§y sá»­a**: Click "Há»§y" Ä‘á»ƒ bá» qua cÃ¡c thay Ä‘á»•i

### 4. DELETE - XÃ³a cÃ¢u há»i/Ä‘Ã¡p Ã¡n
- ğŸ—‘ï¸ **XÃ³a cÃ¢u há»i**: Click "XÃ³a cÃ¢u há»i" vá»›i xÃ¡c nháº­n
- ğŸ—‘ï¸ **XÃ³a Ä‘Ã¡p Ã¡n**: Click icon thÃ¹ng rÃ¡c bÃªn cáº¡nh Ä‘Ã¡p Ã¡n
- âš ï¸ **XÃ¡c nháº­n**: Popconfirm Ä‘á»ƒ trÃ¡nh xÃ³a nháº§m

### 2. Loáº¡i cÃ¢u há»i
**Multiple choice (Tráº¯c nghiá»‡m 1 Ä‘Ã¡p Ã¡n)**
- Icon: Radio button (â—‹)
- Chá»‰ cho phÃ©p chá»n 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng
- Khi chá»n Ä‘Ã¡p Ã¡n má»›i, Ä‘Ã¡p Ã¡n cÅ© sáº½ tá»± Ä‘á»™ng bá» chá»n

**Checkboxes (Tráº¯c nghiá»‡m nhiá»u Ä‘Ã¡p Ã¡n)**
- Icon: Checkbox (â˜)
- Cho phÃ©p chá»n nhiá»u Ä‘Ã¡p Ã¡n Ä‘Ãºng
- CÃ³ thá»ƒ check/uncheck báº¥t ká»³ Ä‘Ã¡p Ã¡n nÃ o

### 3. Quáº£n lÃ½ Ä‘Ã¡p Ã¡n
- â• **ThÃªm Ä‘Ã¡p Ã¡n**: Click nÃºt "Add option"
- âœï¸ **Nháº­p ná»™i dung Ä‘Ã¡p Ã¡n**: GÃµ trá»±c tiáº¿p vÃ o Ã´ "Answer 1", "Answer 2"...
- âœ… **Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng**:
  - Click radio button (cÃ¢u há»i 1 Ä‘Ã¡p Ã¡n)
  - Click checkbox (cÃ¢u há»i nhiá»u Ä‘Ã¡p Ã¡n)
- **Tá»‘i thiá»ƒu**: 2 Ä‘Ã¡p Ã¡n
- **Báº¯t buá»™c**: Ãt nháº¥t 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng

### 4. Validation
Component tá»± Ä‘á»™ng kiá»ƒm tra:
- âœ… Táº¥t cáº£ cÃ¢u há»i pháº£i cÃ³ ná»™i dung
- âœ… Táº¥t cáº£ Ä‘Ã¡p Ã¡n pháº£i cÃ³ ná»™i dung
- âœ… Má»—i cÃ¢u há»i pháº£i cÃ³ Ã­t nháº¥t 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng
- âœ… Pháº£i cÃ³ Ã­t nháº¥t 1 cÃ¢u há»i
- âœ… Má»—i cÃ¢u há»i pháº£i cÃ³ Ã­t nháº¥t 2 Ä‘Ã¡p Ã¡n

## CÃ¡ch sá»­ dá»¥ng

### Xem vÃ  quáº£n lÃ½ cÃ¢u há»i
1. Click nÃºt **"CÃ¢u há»i"** á»Ÿ cá»™t "HÃ nh Ä‘á»™ng" trong báº£ng bÃ i kiá»ƒm tra
2. Modal "Quáº£n lÃ½ cÃ¢u há»i" hiá»‡n ra vá»›i danh sÃ¡ch cÃ¢u há»i hiá»‡n cÃ³

### Táº¡o cÃ¢u há»i má»›i
1. Click nÃºt **"ThÃªm cÃ¢u há»i má»›i"** (hoáº·c "ThÃªm cÃ¢u há»i Ä‘áº§u tiÃªn" náº¿u chÆ°a cÃ³)
2. Nháº­p ná»™i dung cÃ¢u há»i
3. Chá»n loáº¡i: "Tráº¯c nghiá»‡m 1 Ä‘Ã¡p Ã¡n" hoáº·c "Tráº¯c nghiá»‡m nhiá»u Ä‘Ã¡p Ã¡n"
4. Nháº­p ná»™i dung cÃ¡c Ä‘Ã¡p Ã¡n
5. ÄÃ¡nh dáº¥u Ä‘Ã¡p Ã¡n Ä‘Ãºng (radio/checkbox)
6. Click **"LÆ°u"** Ä‘á»ƒ táº¡o

### Sá»­a cÃ¢u há»i
1. Click nÃºt **"Sá»­a"** trÃªn cÃ¢u há»i cáº§n chá»‰nh sá»­a
2. Card chuyá»ƒn sang mÃ u há»“ng (cháº¿ Ä‘á»™ edit)
3. Thay Ä‘á»•i ná»™i dung tÃ¹y Ã½
4. Click **"LÆ°u"** Ä‘á»ƒ cáº­p nháº­t hoáº·c **"Há»§y"** Ä‘á»ƒ bá» qua

### XÃ³a cÃ¢u há»i/Ä‘Ã¡p Ã¡n
1. Click **"XÃ³a cÃ¢u há»i"** hoáº·c icon thÃ¹ng rÃ¡c bÃªn Ä‘Ã¡p Ã¡n
2. XÃ¡c nháº­n trong Popconfirm
3. Dá»¯ liá»‡u sáº½ bá»‹ xÃ³a khá»i database

## Giao diá»‡n

### MÃ u sáº¯c cháº¿ Ä‘á»™
- **Cháº¿ Ä‘á»™ xem**: Ná»n xÃ¡m (#f5f5f5) - Read-only
- **Cháº¿ Ä‘á»™ sá»­a**: Ná»n há»“ng (#fadadd) - CÃ³ thá»ƒ chá»‰nh sá»­a
- **CÃ¢u há»i má»›i**: Ná»n há»“ng (#fadadd) - Äang táº¡o

### Buttons
- **"Sá»­a"**: VÃ o cháº¿ Ä‘á»™ edit (icon Edit)
- **"LÆ°u"**: LÆ°u thay Ä‘á»•i (icon Save, mÃ u xanh)
- **"Há»§y"**: Há»§y edit (icon X)
- **"XÃ³a cÃ¢u há»i"**: XÃ³a cÃ¢u há»i (icon Trash2, mÃ u Ä‘á»)
- **"ThÃªm Ä‘Ã¡p Ã¡n"**: ThÃªm Ä‘Ã¡p Ã¡n má»›i
- **"ThÃªm cÃ¢u há»i má»›i"**: Button dashed full width

### Elements
- **Input**: Ná»n tráº¯ng, border radius 8px
- **Radio/Checkbox**: TÃ¹y loáº¡i cÃ¢u há»i
- **Popconfirm**: XÃ¡c nháº­n xÃ³a vá»›i title vÃ  description

## Props

```typescript
interface ManageQuestionsProps {
  open: boolean;           // Hiá»ƒn thá»‹/áº©n modal
  testId: string;          // ID cá»§a bÃ i test
  onCancel: () => void;    // Callback khi Ä‘Ã³ng modal
}
```

## API Integration - CRUD Operations

### Queries (Read)
- `useFindManyQuestion()` - Láº¥y danh sÃ¡ch cÃ¢u há»i
- `useFindManyAnswer()` - Láº¥y danh sÃ¡ch Ä‘Ã¡p Ã¡n
- Auto refetch sau má»—i mutation

### Mutations
**Question:**
- `useCreateQuestion()` - Táº¡o cÃ¢u há»i má»›i (CREATE)
- `useUpdateQuestion()` - Cáº­p nháº­t cÃ¢u há»i (UPDATE)
- `useDeleteQuestion()` - XÃ³a cÃ¢u há»i (DELETE)

**Answer:**
- `useCreateAnswer()` - Táº¡o Ä‘Ã¡p Ã¡n má»›i (CREATE)
- `useUpdateAnswer()` - Cáº­p nháº­t Ä‘Ã¡p Ã¡n (UPDATE)
- `useDeleteAnswer()` - XÃ³a Ä‘Ã¡p Ã¡n (DELETE)

### Data Relations
```
Test (1) â†’ (N) Questions (1) â†’ (N) Answers
```

## State Management

### Local State
- `editingQuestions[]` - Danh sÃ¡ch cÃ¢u há»i Ä‘ang edit
- `hasChanges` - CÃ³ thay Ä‘á»•i chÆ°a lÆ°u
- `isEditing` - CÃ¢u há»i Ä‘ang á»Ÿ cháº¿ Ä‘á»™ edit
- `isNew` - CÃ¢u há»i/Ä‘Ã¡p Ã¡n má»›i chÆ°a lÆ°u DB

### Edit Modes
1. **View Mode**: Read-only, hiá»ƒn thá»‹ dá»¯ liá»‡u tá»« DB
2. **Edit Mode**: CÃ³ thá»ƒ chá»‰nh sá»­a, chÆ°a lÆ°u DB
3. **New Mode**: Äang táº¡o má»›i, chÆ°a cÃ³ trong DB

## Features Chi Tiáº¿t

### âœ… Smart Save
- Chá»‰ lÆ°u khi cÃ³ thay Ä‘á»•i
- Tá»± Ä‘á»™ng phÃ¢n biá»‡t Create/Update
- Batch save vá»›i "LÆ°u táº¥t cáº£"

### âœ… Validation
- Báº¯t buá»™c nháº­p ná»™i dung cÃ¢u há»i
- Báº¯t buá»™c nháº­p ná»™i dung Ä‘Ã¡p Ã¡n
- Ãt nháº¥t 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng
- Tá»‘i thiá»ƒu 2 Ä‘Ã¡p Ã¡n

### âœ… UX Enhancements
- Loading state
- Empty state vá»›i hÆ°á»›ng dáº«n
- Confirmation trÆ°á»›c khi xÃ³a
- Toast notifications
- Disable inputs khi khÃ´ng edit
- Auto refetch sau mutations

### âœ… Data Integrity
- Cascade delete answers khi xÃ³a question
- Validate trÆ°á»›c khi save
- Error handling
- Optimistic updates
